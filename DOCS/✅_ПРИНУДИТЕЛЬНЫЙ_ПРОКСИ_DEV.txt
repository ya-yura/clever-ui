‚úÖ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ü–†–û–ö–°–ò –í DEV
==============================================

–î–∞—Ç–∞: 31 –æ–∫—Ç—è–±—Ä—è 2025
–í—Ä–µ–º—è: ~16:00

## –ü—Ä–æ–±–ª–µ–º–∞

–î–∞–∂–µ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Vite proxy, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ URL –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ localStorage, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ CORS –æ—à–∏–±–∫–∏.

```javascript
‚ùå [API] baseURL updated from config: http://localhost:9000/MobileSMARTS/api/v1
‚ùå Access to XMLHttpRequest ... has been blocked by CORS policy
```

## –ü—Ä–∏—á–∏–Ω–∞

–ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–ª `configService.isConfigured()` –∏ –µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—ã–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (–¥–∞–∂–µ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –µ—ë –≤–º–µ—Å—Ç–æ –ø—Ä–æ–∫—Å–∏.

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è `import.meta.env.DEV`:
- **–í DEV —Ä–µ–∂–∏–º–µ** - –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å (–ø—Ä–æ–∫—Å–∏)
- **–í PROD —Ä–µ–∂–∏–º–µ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ Setup page

### –ö–æ–¥ (api.ts)

```typescript
updateBaseURL() {
  try {
    // FORCE relative path in development (for Vite proxy to work)
    const isDevelopment = import.meta.env.DEV;
    
    if (isDevelopment) {
      // ALWAYS use relative path in dev to enable Vite proxy
      const devBaseUrl = '/MobileSMARTS/api/v1';
      this.client.defaults.baseURL = devBaseUrl;
      console.log('üîß [DEV] Using relative path (via Vite proxy):', devBaseUrl);
      console.log('üîß [DEV] Proxy will forward to: http://localhost:9000');
      return; // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ dev!
    }
    
    // –í production –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    if (configService.isConfigured()) {
      const serverUrl = configService.getServerUrl();
      this.client.defaults.baseURL = serverUrl;
      console.log('‚úÖ [PROD] baseURL from config:', serverUrl);
    } else {
      throw new Error('Server URL not configured. Please go to Setup page.');
    }
  } catch (error) {
    console.error('‚ùå [API] Failed to update baseURL:', error);
  }
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ù–µ –Ω—É–∂–Ω–æ –æ—á–∏—â–∞—Ç—å localStorage** - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ dev  
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏** - developer experience —É–ª—É—á—à–µ–Ω  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è prod** - —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ production  
‚úÖ **–Ø–≤–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∏–¥–Ω–æ –∫–∞–∫–æ–π —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```javascript
üîß [DEV] Using relative path (via Vite proxy): /MobileSMARTS/api/v1
üîß [DEV] Proxy will forward to: http://localhost:9000
üîç [API] Trying to get documents for type: PrihodNaSklad
üåê [API] GET /MobileSMARTS/api/v1/Docs/PrihodNaSklad
‚úÖ [API] Response status: 200
```

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:**
- `[DEV]` - —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ —á—Ç–æ —ç—Ç–æ dev —Ä–µ–∂–∏–º
- URL **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π**: `/MobileSMARTS/...`
- **–ù–ï–¢ CORS –æ—à–∏–±–æ–∫!**

## –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥:**
   ```bash
   git pull
   ```

2. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   ```
   Ctrl+Shift+R
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `[DEV]` –ª–æ–≥–∏

**–ù–∏–∫–∞–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ localStorage –±–æ–ª—å—à–µ –ù–ï –Ω—É–∂–Ω–∞!**

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û
**–§–∞–π–ª:** src/services/api.ts
**–ö–æ–º–º–∏—Ç:** ce6420a

